{"ast":null,"code":"/** Класс API для работы с сервером.\n * Описаны методы для работы с карточками, которые тянутся с сервера и отправляются на сервер\n */\nclass Api {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n\n  _getResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  getCards() {\n    return fetch(`${this._url}/cards`, {\n      headers: this._headers\n    }).then(res => this._getResponse(res));\n  }\n\n  getUserData() {\n    return fetch(`${this._url}/users/me`, {\n      headers: this._headers\n    }).then(res => this._getResponse(res));\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserData(), this.getCards()]);\n  }\n\n  editProfile(name, job) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: job\n      })\n    }).then(res => this._getResponse(res));\n  }\n\n  addNewCard(name, link) {\n    return fetch(`${this._url}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    }).then(res => this._getResponse(res));\n  }\n\n  likeCard(id) {\n    return fetch(`${this._url}/cards/likes/${id}`, {\n      method: \"PUT\",\n      headers: this._headers\n    }).then(res => this._getResponse(res));\n  }\n\n  dislikeCard(id) {\n    return fetch(`${this._url}/cards/likes/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers\n    }).then(res => this._getResponse(res));\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._url}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers\n    }).then(res => this._getResponse(res));\n  }\n\n  uploadAvatar(url) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: url\n      })\n    }).then(res => this._getResponse(res));\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: isLiked ? \"PUT\" : \"DELETE\",\n      headers: this._headers\n    }).then(res => this._getResponse(res));\n  }\n\n} //Объект api для доступа к серверу, откуда будем тянуть все нужные данные\n\n\nconst api = new Api({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-18',\n  headers: {\n    authorization: \"36f02e32-425e-4cd6-9a5e-ab45df68f83b\",\n    \"Content-Type\": \"application/json\"\n  }\n});\nexport default api;","map":{"version":3,"sources":["/Users/artem/Desktop/dev/react-mesto-auth/src/utils/api.js"],"names":["Api","constructor","config","_url","url","_headers","headers","_getResponse","res","ok","json","Promise","reject","status","getCards","fetch","then","getUserData","getInitialData","all","editProfile","name","job","method","body","JSON","stringify","about","addNewCard","link","likeCard","id","dislikeCard","deleteCard","uploadAvatar","avatar","changeLikeCardStatus","cardId","isLiked","api","authorization"],"mappings":"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","sourcesContent":["/** Класс API для работы с сервером.\n * Описаны методы для работы с карточками, которые тянутся с сервера и отправляются на сервер\n */\n\nclass Api {\n  constructor(config) {\n    this._url = config.url;\n    this._headers = config.headers;\n  }\n\n  _getResponse(res) {\n    if(res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  getCards() {\n    return fetch(`${this._url}/cards`, {\n      headers: this._headers\n    })\n      .then(res => this._getResponse(res))\n  }\n\n  getUserData() {\n    return fetch(`${this._url}/users/me`,\n      {\n        headers: this._headers\n      })\n      .then(res => this._getResponse(res))\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserData(), this.getCards()]);\n  }\n\n  editProfile(name, job) {\n    return fetch(`${this._url}/users/me`,\n      {\n        method: \"PATCH\",\n        headers: this._headers,\n        body: JSON.stringify({\n          name: name,\n          about: job\n        })\n      })\n      .then(res => this._getResponse(res))\n  }\n\n  addNewCard(name, link) {\n    return fetch(`${this._url}/cards`,\n      {\n        method: \"POST\",\n        headers: this._headers,\n        body: JSON.stringify({\n          name: name,\n          link: link\n        })\n      })\n      .then(res => this._getResponse(res))\n  }\n\n  likeCard(id) {\n    return fetch(`${this._url}/cards/likes/${id}`,\n      {\n        method: \"PUT\",\n        headers: this._headers\n      })\n      .then(res => this._getResponse(res))\n  }\n\n  dislikeCard(id) {\n    return fetch(`${this._url}/cards/likes/${id}`,\n      {\n        method: \"DELETE\",\n        headers: this._headers,\n      })\n      .then(res => this._getResponse(res))\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._url}/cards/${id}`,\n      {\n        method: \"DELETE\",\n        headers: this._headers,\n      })\n      .then(res => this._getResponse(res))\n  }\n\n  uploadAvatar(url) {\n    return fetch(`${this._url}/users/me/avatar`,\n      {\n        method: \"PATCH\",\n        headers: this._headers,\n        body: JSON.stringify({\n          avatar: url\n        })\n      })\n      .then(res => this._getResponse(res))\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return fetch(`${this._url}/cards/likes/${cardId}`,\n      {\n        method: isLiked ? \"PUT\" : \"DELETE\",\n        headers: this._headers\n      })\n      .then(res => this._getResponse(res))\n  }\n}\n\n//Объект api для доступа к серверу, откуда будем тянуть все нужные данные\nconst api = new Api({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-18',\n  headers: {\n    authorization: \"36f02e32-425e-4cd6-9a5e-ab45df68f83b\",\n    \"Content-Type\": \"application/json\",\n  }\n});\nexport default api;\n"]},"metadata":{},"sourceType":"module"}